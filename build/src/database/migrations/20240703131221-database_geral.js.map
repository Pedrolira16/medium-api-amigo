{"version":3,"file":"20240703131221-database_geral.js","names":["module","exports","up","queryInterface","Sequelize","t","sequelize","transaction","createTable","id","allowNull","autoIncrement","primaryKey","type","INTEGER","name","STRING","email","password","created_at","DATE","updated_at","deleted_at","user_id","references","model","key","title","content","summary","total_likes","is_deleted","BOOLEAN","defaultValue","post_id","commit","error","rollback","down","dropTable"],"sources":["../../../../src/database/migrations/20240703131221-database_geral.js"],"sourcesContent":["'use strict';\n\nmodule.exports = {\n  up: async (queryInterface, Sequelize) => {\n    const t = await queryInterface.sequelize.transaction();\n\n    try {\n      await queryInterface.createTable('users', {\n        id: {\n          allowNull: false,\n          autoIncrement: true,\n          primaryKey: true,\n          type: Sequelize.INTEGER,\n        },\n\n        name: {\n          type: Sequelize.STRING,\n          allowNull: false,\n        },\n\n        email: {\n          type: Sequelize.STRING,\n          allowNull: false,\n        },\n\n        password: {\n          type: Sequelize.STRING,\n          allowNull: false,\n        },\n\n        created_at: Sequelize.DATE,\n        updated_at: Sequelize.DATE,\n        deleted_at: Sequelize.DATE,\n\n      }, { transaction: t })\n\n      await queryInterface.createTable('posts', {\n        id: {\n          type: Sequelize.INTEGER,\n          allowNull: false,\n          autoIncrement: true,\n          primaryKey: true,\n        },\n\n        user_id: {\n          type: Sequelize.INTEGER,\n          allowNull: false,\n          references: {\n            model: 'users',\n            key: 'id'\n          }\n        },\n\n        title: {\n          type: Sequelize.STRING,\n          allowNull: false,\n        },\n\n        content: {\n          type: Sequelize.STRING,\n          allowNull: false,\n        },\n\n        summary: {\n          type: Sequelize.STRING,\n          allowNull: false,\n        },\n\n        total_likes: {\n          type: Sequelize.INTEGER,\n          allowNull: false,\n        },\n\n        is_deleted: {\n          type: Sequelize.BOOLEAN,\n          defaultValue: false,\n          allowNull: false,\n        },\n\n        created_at: Sequelize.DATE,\n        updated_at: Sequelize.DATE,\n\n      }, { transaction: t })\n      await queryInterface.createTable('post_likes', {\n        id: {\n          allowNull: false,\n          autoIncrement: true,\n          primaryKey: true,\n          type: Sequelize.INTEGER,\n        },\n\n        post_id: {\n          type: Sequelize.INTEGER,\n          allowNull: false,\n          references: {\n            model: 'posts',\n            key: 'id',\n          },\n        },\n\n        user_id: {\n          type: Sequelize.INTEGER,\n          allowNull: false,\n          references: {\n            model: 'users',\n            key: 'id',\n          },\n        },\n\n        is_deleted: {\n          type: Sequelize.BOOLEAN,\n          defaultValue: false,\n          allowNull: false,\n        },\n\n        created_at: Sequelize.DATE,\n        updated_at: Sequelize.DATE\n      }, { transaction: t });\n      await t.commit();\n    }\n    catch (error) {\n      await t.rollback();\n      throw error;\n    }\n  },\n\n  down: async (queryInterface, Sequelize) => {\n    const t = await queryInterface.sequelize.transaction();\n\n    try {\n      await queryInterface.dropTable('post_likes', { transaction: t });\n      await queryInterface.dropTable('posts', { transaction: t });\n      await queryInterface.dropTable('users', { transaction: t });\n\n      await t.commit();\n    }\n    catch (error) {\n      await t.rollback();\n      throw error;\n    }\n  }\n};\n"],"mappings":"AAAA,YAAY,CAEZA,MAAM,CAACC,OAAO,CAAG,CACfC,EAAE,CAAE,KAAAA,CAAOC,cAAc,CAAEC,SAAS,GAAK,CACvC,KAAM,CAAAC,CAAC,CAAG,KAAM,CAAAF,cAAc,CAACG,SAAS,CAACC,WAAW,CAAC,CAAC,CAEtD,GAAI,CACF,KAAM,CAAAJ,cAAc,CAACK,WAAW,CAAC,OAAO,CAAE,CACxCC,EAAE,CAAE,CACFC,SAAS,CAAE,KAAK,CAChBC,aAAa,CAAE,IAAI,CACnBC,UAAU,CAAE,IAAI,CAChBC,IAAI,CAAET,SAAS,CAACU,OAClB,CAAC,CAEDC,IAAI,CAAE,CACJF,IAAI,CAAET,SAAS,CAACY,MAAM,CACtBN,SAAS,CAAE,KACb,CAAC,CAEDO,KAAK,CAAE,CACLJ,IAAI,CAAET,SAAS,CAACY,MAAM,CACtBN,SAAS,CAAE,KACb,CAAC,CAEDQ,QAAQ,CAAE,CACRL,IAAI,CAAET,SAAS,CAACY,MAAM,CACtBN,SAAS,CAAE,KACb,CAAC,CAEDS,UAAU,CAAEf,SAAS,CAACgB,IAAI,CAC1BC,UAAU,CAAEjB,SAAS,CAACgB,IAAI,CAC1BE,UAAU,CAAElB,SAAS,CAACgB,IAExB,CAAC,CAAE,CAAEb,WAAW,CAAEF,CAAE,CAAC,CAAC,CAEtB,KAAM,CAAAF,cAAc,CAACK,WAAW,CAAC,OAAO,CAAE,CACxCC,EAAE,CAAE,CACFI,IAAI,CAAET,SAAS,CAACU,OAAO,CACvBJ,SAAS,CAAE,KAAK,CAChBC,aAAa,CAAE,IAAI,CACnBC,UAAU,CAAE,IACd,CAAC,CAEDW,OAAO,CAAE,CACPV,IAAI,CAAET,SAAS,CAACU,OAAO,CACvBJ,SAAS,CAAE,KAAK,CAChBc,UAAU,CAAE,CACVC,KAAK,CAAE,OAAO,CACdC,GAAG,CAAE,IACP,CACF,CAAC,CAEDC,KAAK,CAAE,CACLd,IAAI,CAAET,SAAS,CAACY,MAAM,CACtBN,SAAS,CAAE,KACb,CAAC,CAEDkB,OAAO,CAAE,CACPf,IAAI,CAAET,SAAS,CAACY,MAAM,CACtBN,SAAS,CAAE,KACb,CAAC,CAEDmB,OAAO,CAAE,CACPhB,IAAI,CAAET,SAAS,CAACY,MAAM,CACtBN,SAAS,CAAE,KACb,CAAC,CAEDoB,WAAW,CAAE,CACXjB,IAAI,CAAET,SAAS,CAACU,OAAO,CACvBJ,SAAS,CAAE,KACb,CAAC,CAEDqB,UAAU,CAAE,CACVlB,IAAI,CAAET,SAAS,CAAC4B,OAAO,CACvBC,YAAY,CAAE,KAAK,CACnBvB,SAAS,CAAE,KACb,CAAC,CAEDS,UAAU,CAAEf,SAAS,CAACgB,IAAI,CAC1BC,UAAU,CAAEjB,SAAS,CAACgB,IAExB,CAAC,CAAE,CAAEb,WAAW,CAAEF,CAAE,CAAC,CAAC,CACtB,KAAM,CAAAF,cAAc,CAACK,WAAW,CAAC,YAAY,CAAE,CAC7CC,EAAE,CAAE,CACFC,SAAS,CAAE,KAAK,CAChBC,aAAa,CAAE,IAAI,CACnBC,UAAU,CAAE,IAAI,CAChBC,IAAI,CAAET,SAAS,CAACU,OAClB,CAAC,CAEDoB,OAAO,CAAE,CACPrB,IAAI,CAAET,SAAS,CAACU,OAAO,CACvBJ,SAAS,CAAE,KAAK,CAChBc,UAAU,CAAE,CACVC,KAAK,CAAE,OAAO,CACdC,GAAG,CAAE,IACP,CACF,CAAC,CAEDH,OAAO,CAAE,CACPV,IAAI,CAAET,SAAS,CAACU,OAAO,CACvBJ,SAAS,CAAE,KAAK,CAChBc,UAAU,CAAE,CACVC,KAAK,CAAE,OAAO,CACdC,GAAG,CAAE,IACP,CACF,CAAC,CAEDK,UAAU,CAAE,CACVlB,IAAI,CAAET,SAAS,CAAC4B,OAAO,CACvBC,YAAY,CAAE,KAAK,CACnBvB,SAAS,CAAE,KACb,CAAC,CAEDS,UAAU,CAAEf,SAAS,CAACgB,IAAI,CAC1BC,UAAU,CAAEjB,SAAS,CAACgB,IACxB,CAAC,CAAE,CAAEb,WAAW,CAAEF,CAAE,CAAC,CAAC,CACtB,KAAM,CAAAA,CAAC,CAAC8B,MAAM,CAAC,CACjB,CACA,MAAOC,KAAK,CAAE,CACZ,KAAM,CAAA/B,CAAC,CAACgC,QAAQ,CAAC,CAAC,CAClB,KAAM,CAAAD,KACR,CACF,CAAC,CAEDE,IAAI,CAAE,KAAAA,CAAOnC,cAAc,CAAEC,SAAS,GAAK,CACzC,KAAM,CAAAC,CAAC,CAAG,KAAM,CAAAF,cAAc,CAACG,SAAS,CAACC,WAAW,CAAC,CAAC,CAEtD,GAAI,CACF,KAAM,CAAAJ,cAAc,CAACoC,SAAS,CAAC,YAAY,CAAE,CAAEhC,WAAW,CAAEF,CAAE,CAAC,CAAC,CAChE,KAAM,CAAAF,cAAc,CAACoC,SAAS,CAAC,OAAO,CAAE,CAAEhC,WAAW,CAAEF,CAAE,CAAC,CAAC,CAC3D,KAAM,CAAAF,cAAc,CAACoC,SAAS,CAAC,OAAO,CAAE,CAAEhC,WAAW,CAAEF,CAAE,CAAC,CAAC,CAE3D,KAAM,CAAAA,CAAC,CAAC8B,MAAM,CAAC,CACjB,CACA,MAAOC,KAAK,CAAE,CACZ,KAAM,CAAA/B,CAAC,CAACgC,QAAQ,CAAC,CAAC,CAClB,KAAM,CAAAD,KACR,CACF,CACF,CAAC","ignoreList":[]}